<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Scroll & Cursor Showcase</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- GSAP & ScrollTrigger CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
  <!-- Three.js CDN (for experimental section) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
  <!-- Lenis for smooth scroll -->
  <script src="https://cdn.jsdelivr.net/npm/@studio-freight/lenis@1.0.38/bundled/lenis.min.js"></script>
  <style>
    :root {
      --theme-bg: #111;
      --theme-fg: #fff;
      --accent: #00ffe7;
      --retro-bg: #f7e26b;
      --retro-fg: #222;
      --modern-bg: #fff;
      --modern-fg: #222;
      --future-bg: #0a0a23;
      --future-fg: #fff;
      --progress-bar: #00ffe7;
    }
    html, body {
      margin: 0;
      padding: 0;
      background: var(--theme-bg);
      color: var(--theme-fg);
      font-family: 'Inter', Arial, sans-serif;
      scroll-behavior: smooth;
      overflow-x: hidden;
    }
    body.theme-retro {
      background: var(--retro-bg);
      color: var(--retro-fg);
      font-family: 'Times New Roman', Times, serif;
    }
    body.theme-modern {
      background: var(--modern-bg);
      color: var(--modern-fg);
      font-family: 'Inter', Arial, sans-serif;
    }
    body.theme-future {
      background: var(--future-bg);
      color: var(--future-fg);
      font-family: 'Orbitron', 'Inter', Arial, sans-serif;
    }
    /* Progress Bar */
    #progress-bar {
      position: fixed;
      top: 0; left: 0;
      width: 0%;
      height: 5px;
      background: linear-gradient(90deg, var(--progress-bar), #ff00cc);
      z-index: 9999;
      border-radius: 0 2px 2px 0;
      transition: width 0.2s cubic-bezier(.4,2,.6,1), background 0.4s;
    }
    /* Theme Switcher */
    #theme-switcher {
      position: fixed;
      top: 16px;
      right: 16px;
      z-index: 10000;
      display: flex;
      gap: 8px;
    }
    #theme-switcher button {
      background: var(--theme-bg);
      color: var(--theme-fg);
      border: 1px solid var(--accent);
      border-radius: 4px;
      padding: 6px 12px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: background 0.2s, color 0.2s;
    }
    #theme-switcher button.active {
      background: var(--accent);
      color: #111;
    }
    /* Custom Cursor Styles */
    .custom-cursor, .cursor-trail {
      pointer-events: none;
      position: fixed;
      z-index: 10001;
      transition: background 0.2s, border 0.2s, transform 0.15s cubic-bezier(.4,2,.6,1);
      will-change: transform;
    }
    .custom-cursor {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--accent);
      mix-blend-mode: difference;
      border: 2px solid #fff;
      transform: translate(-50%, -50%) scale(1);
      transition: background 0.2s, border 0.2s, transform 0.15s cubic-bezier(.4,2,.6,1);
    }
    .custom-cursor.magnetic {
      transform: translate(-50%, -50%) scale(1.5);
      background: #fff;
      border: 2px solid var(--accent);
    }
    .custom-cursor.pixel {
      width: 24px;
      height: 24px;
      border-radius: 0;
      background: url('https://i.imgur.com/1Q9Z1Zm.png') center/cover no-repeat;
      border: none;
      box-shadow: 0 0 0 2px #000;
    }
    .custom-cursor.enlarged {
      width: 60px;
      height: 60px;
      background: rgba(0,255,231,0.15);
      border: 2px solid var(--accent);
      mix-blend-mode: lighten;
    }
    .custom-cursor.preview {
      background: #fff;
      border: 2px solid var(--accent);
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .custom-cursor.morph-play {
      background: #ff00cc;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .custom-cursor.morph-play::after {
      content: '';
      display: block;
      width: 0;
      height: 0;
      border-left: 14px solid #fff;
      border-top: 8px solid transparent;
      border-bottom: 8px solid transparent;
      margin-left: 4px;
    }
    .custom-cursor.morph-tap {
      background: #00ffe7;
      border-radius: 12px;
      width: 60px;
      height: 32px;
      color: #111;
      font-size: 0.8rem;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      letter-spacing: 0.05em;
    }
    .cursor-trail {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--accent);
      opacity: 0.3;
      pointer-events: none;
      filter: blur(2px);
      transition: opacity 0.2s;
    }
    /* Playground Cursor Menu */
    #cursor-menu {
      position: fixed;
      bottom: 24px;
      right: 24px;
      z-index: 10002;
      background: rgba(20,20,20,0.9);
      color: #fff;
      border-radius: 8px;
      padding: 12px 18px;
      box-shadow: 0 2px 16px rgba(0,0,0,0.18);
      display: flex;
      gap: 10px;
      align-items: center;
      font-size: 0.95rem;
      user-select: none;
    }
    #cursor-menu label {
      margin-right: 6px;
      font-weight: 500;
    }
    #cursor-menu select {
      background: #222;
      color: #fff;
      border: 1px solid var(--accent);
      border-radius: 4px;
      padding: 2px 8px;
      font-size: 1rem;
    }
    /* Section Styles */
    section {
      min-height: 100vh;
      width: 100vw;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      transition: background 0.4s, color 0.4s;
    }
    /* 1. Landing Section */
    #landing {
      background: linear-gradient(120deg, #0a0a23 0%, #1a1a40 100%);
      color: #fff;
      flex-direction: column;
      text-align: center;
      position: relative;
      z-index: 1;
    }
    #landing .parallax-bg {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: url('https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=1200&q=80') center/cover no-repeat;
      opacity: 0.18;
      z-index: 0;
      will-change: transform;
      pointer-events: none;
    }
    #landing .intro {
      position: relative;
      z-index: 2;
      font-size: 2.8rem;
      font-weight: 700;
      letter-spacing: 0.04em;
      margin-bottom: 1.2rem;
      opacity: 0;
      transform: translateY(40px);
      transition: opacity 0.7s, transform 0.7s;
    }
    #landing .intro.animated {
      opacity: 1;
      transform: translateY(0);
    }
    #landing .cta {
      margin-top: 2.5rem;
      font-size: 1.2rem;
      background: var(--accent);
      color: #111;
      border: none;
      border-radius: 24px;
      padding: 0.8em 2.2em;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 2px 16px rgba(0,255,231,0.12);
      transition: background 0.2s, color 0.2s, transform 0.15s;
    }
    #landing .cta:hover {
      background: #fff;
      color: var(--accent);
      transform: scale(1.07);
    }
    /* 2. Web 1.0 Retro Section */
    #retro {
      background: var(--retro-bg);
      color: var(--retro-fg);
      font-family: 'Times New Roman', Times, serif;
      flex-direction: column;
      align-items: flex-start;
      justify-content: flex-start;
      padding: 48px 0 0 0;
      min-height: 120vh;
      border-top: 6px solid #222;
      border-bottom: 6px solid #222;
      position: relative;
    }
    #retro .marquee {
      width: 100vw;
      background: #ff00cc;
      color: #fff;
      font-size: 1.5rem;
      font-family: 'Comic Sans MS', cursive, sans-serif;
      padding: 8px 0;
      overflow: hidden;
      white-space: nowrap;
      box-shadow: 0 2px 8px #ff00cc44;
    }
    #retro .marquee span {
      display: inline-block;
      animation: marquee 12s linear infinite;
    }
    @keyframes marquee {
      0% { transform: translateX(100vw);}
      100% { transform: translateX(-100vw);}
    }
    #retro .gif-row {
      display: flex;
      gap: 18px;
      margin: 32px 0 0 32px;
    }
    #retro .gif-row img {
      width: 64px;
      height: 64px;
      image-rendering: pixelated;
      border: 2px solid #222;
      background: #fff;
      border-radius: 8px;
    }
    #retro .retro-content {
      margin: 32px 0 0 32px;
      font-size: 1.3rem;
      max-width: 600px;
      line-height: 1.5;
    }
    /* 3. Modern Portfolio Section */
    #modern {
      background: var(--modern-bg);
      color: var(--modern-fg);
      font-family: 'Inter', Arial, sans-serif;
      min-height: 100vh;
      overflow: hidden;
      position: relative;
      display: flex;
      align-items: stretch;
      justify-content: flex-start;
      padding: 0;
    }
    #modern .horizontal-scroll {
      display: flex;
      flex-direction: row;
      height: 100vh;
      width: 400vw;
      transition: transform 0.7s cubic-bezier(.4,2,.6,1);
    }
    #modern .project {
      min-width: 100vw;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 48px;
      box-sizing: border-box;
      opacity: 0.7;
      transform: scale(0.96);
      transition: opacity 0.5s, transform 0.5s;
      position: relative;
    }
    #modern .project.active {
      opacity: 1;
      transform: scale(1.03);
      z-index: 2;
    }
    #modern .project img {
      width: 340px;
      height: 220px;
      object-fit: cover;
      border-radius: 18px;
      box-shadow: 0 4px 32px rgba(0,0,0,0.13);
      margin-bottom: 1.2rem;
      transition: box-shadow 0.3s;
    }
    #modern .project h3 {
      font-size: 2rem;
      margin: 0.5rem 0 0.2rem 0;
    }
    #modern .project p {
      font-size: 1.1rem;
      color: #666;
      max-width: 400px;
      margin: 0 auto;
    }
    /* 4. Experimental / Future Section */
    #future {
      background: var(--future-bg);
      color: var(--future-fg);
      min-height: 120vh;
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
    }
    #future #three-bg {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      width: 100vw; height: 100vh;
      z-index: 0;
      pointer-events: none;
    }
    #future .future-content {
      position: relative;
      z-index: 2;
      text-align: center;
      max-width: 700px;
      margin: 0 auto;
      font-size: 2rem;
      font-family: 'Orbitron', 'Inter', Arial, sans-serif;
      letter-spacing: 0.04em;
      margin-top: 2.5rem;
    }
    #future .ai-mockup {
      margin: 2.5rem auto 0 auto;
      width: 420px;
      height: 220px;
      background: linear-gradient(120deg, #222 0%, #333 100%);
      border-radius: 18px;
      box-shadow: 0 4px 32px #00ffe733;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 1.2rem;
      font-family: 'Fira Mono', monospace;
      position: relative;
      overflow: hidden;
    }
    #future .ai-mockup span {
      animation: blink 1.2s steps(1) infinite;
    }
    @keyframes blink {
      0%, 100% { opacity: 1;}
      50% { opacity: 0;}
    }
    /* 5. Playground Section */
    #playground {
      background: linear-gradient(120deg, #fff 0%, #e0e0e0 100%);
      color: #222;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
      z-index: 1;
      transition: background 0.4s, color 0.4s;
    }
    #playground h2 {
      font-size: 2.2rem;
      margin-bottom: 1.2rem;
    }
    #playground .desc {
      font-size: 1.1rem;
      margin-bottom: 2.2rem;
      max-width: 600px;
      text-align: center;
    }
    #playground .scroll-style-switcher {
      display: flex;
      gap: 12px;
      margin-bottom: 2.2rem;
    }
    #playground .scroll-style-switcher button {
      background: #fff;
      color: #222;
      border: 1.5px solid var(--accent);
      border-radius: 6px;
      padding: 0.6em 1.5em;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: background 0.2s, color 0.2s, border 0.2s;
    }
    #playground .scroll-style-switcher button.active {
      background: var(--accent);
      color: #111;
      border: 2px solid #111;
    }
    /* Responsive */
    @media (max-width: 900px) {
      #modern .project img, #future .ai-mockup {
        width: 90vw;
        height: 160px;
      }
      #modern .project {
        padding: 16px;
      }
      #future .future-content {
        font-size: 1.2rem;
      }
    }
    @media (max-width: 600px) {
      #modern .project img, #future .ai-mockup {
        width: 98vw;
        height: 120px;
      }
      #modern .project {
        padding: 4px;
      }
      #future .future-content {
        font-size: 1rem;
      }
    }
  </style>
</head>
<body>
  <div id="progress-bar"></div>
  <div id="theme-switcher">
    <button data-theme="default" class="active">Dark</button>
    <button data-theme="retro">Retro</button>
    <button data-theme="modern">Modern</button>
    <button data-theme="future">Future</button>
  </div>
  <div class="custom-cursor"></div>
  <div id="cursor-menu">
    <label for="cursor-style">Cursor:</label>
    <select id="cursor-style">
      <option value="classic">Classic Dot</option>
      <option value="magnetic">Magnetic</option>
      <option value="pixel">Pixel Hand</option>
      <option value="enlarged">Enlarged</option>
      <option value="trail">Trail</option>
      <option value="image">Image</option>
    </select>
  </div>
  <!-- 1. Landing Section -->
  <section id="landing">
    <div class="parallax-bg"></div>
    <div class="intro">Welcome to the <span style="color:var(--accent)">Scroll & Cursor</span> Showcase</div>
    <button class="cta" data-magnetic>Explore ‚Üì</button>
  </section>
  <!-- 2. Web 1.0 Retro Section -->
  <section id="retro">
    <div class="marquee"><span>üî• Welcome to my 90s WebZone! üöÄ | <b>Best viewed in Netscape Navigator</b> | <img src="https://i.imgur.com/1Q9Z1Zm.png" style="height:1.2em;vertical-align:middle;"> | <b>Sign my Guestbook!</b> | <img src="https://i.imgur.com/8QfQw2B.gif" style="height:1.2em;vertical-align:middle;"> | Under Construction üöß</span></div>
    <div class="gif-row">
      <img src="https://i.imgur.com/8QfQw2B.gif" alt="Under Construction">
      <img src="https://i.imgur.com/1Q9Z1Zm.png" alt="Pixel Hand">
      <img src="https://i.imgur.com/2yaf2wb.gif" alt="Dancing Baby">
      <img src="https://i.imgur.com/3Q1Qw2B.gif" alt="Mail">
    </div>
    <div class="retro-content">
      <marquee behavior="alternate" scrollamount="8" style="color:#ff00cc;font-size:1.2em;">Welcome to my homepage! <b>Enjoy the nostalgia.</b></marquee>
      <p>
        <b>Remember the days of dial-up?</b> <br>
        <span style="background:#fff;color:#222;padding:2px 6px;border-radius:4px;">Best viewed in 800x600</span> <br>
        <img src="https://i.imgur.com/2yaf2wb.gif" alt="Dancing Baby" style="height:2em;vertical-align:middle;">
        <br>
        <blink>Don't forget to sign the guestbook!</blink>
      </p>
    </div>
  </section>
  <!-- 3. Modern Portfolio Section -->
  <section id="modern">
    <div class="horizontal-scroll">
      <div class="project active" data-preview="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=400&q=80">
        <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=400&q=80" alt="Project 1">
        <h3>Modern Web App</h3>
        <p>React, GSAP, and Three.js powered dashboard with real-time data and beautiful UI.</p>
      </div>
      <div class="project" data-preview="https://images.unsplash.com/photo-1465101178521-c1a9136a3b99?auto=format&fit=crop&w=400&q=80">
        <img src="https://images.unsplash.com/photo-1465101178521-c1a9136a3b99?auto=format&fit=crop&w=400&q=80" alt="Project 2">
        <h3>Brand Identity</h3>
        <p>Logo, branding, and web presence for a next-gen startup. Animations on scroll.</p>
      </div>
      <div class="project" data-preview="https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=400&q=80">
        <img src="https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=400&q=80" alt="Project 3">
        <h3>Portfolio Site</h3>
        <p>Personal portfolio with horizontal scroll, custom cursor, and smooth transitions.</p>
      </div>
      <div class="project" data-preview="https://images.unsplash.com/photo-1465101178521-c1a9136a3b99?auto=format&fit=crop&w=400&q=80">
        <img src="https://images.unsplash.com/photo-1465101178521-c1a9136a3b99?auto=format&fit=crop&w=400&q=80" alt="Project 4">
        <h3>Experimental UI</h3>
        <p>GSAP-powered micro-interactions, 3D backgrounds, and AI mockups.</p>
      </div>
    </div>
  </section>
  <!-- 4. Experimental / Future Section -->
  <section id="future">
    <div id="three-bg"></div>
    <div class="future-content">
      <div>üëæ <b>Experimental Playground</b> ‚Äì Scroll to reveal layers, 3D, and AI mockups</div>
      <div class="ai-mockup">
        <span>AI: "How can I help you code today?"</span>
      </div>
    </div>
  </section>
  <!-- 5. Playground Section -->
  <section id="playground">
    <h2>üïπÔ∏è Playground: Try Different Cursors & Scrolls</h2>
    <div class="desc">
      Switch between scroll and cursor styles. Experiment with magnetic, trail, pixel, and more!
    </div>
    <div class="scroll-style-switcher">
      <button data-scroll="classic" class="active">Classic</button>
      <button data-scroll="parallax">Parallax</button>
      <button data-scroll="inertia">Inertia</button>
      <button data-scroll="scrolljack">Scroll-Jack</button>
    </div>
    <div style="margin-top:2.5rem;font-size:1.1rem;">
      <b>Tip:</b> Try changing the theme and cursor style for a different experience!
    </div>
  </section>
  <script>
    // --- Theme Switcher ---
    const themeButtons = document.querySelectorAll('#theme-switcher button');
    themeButtons.forEach(btn => {
      btn.onclick = () => {
        document.body.className = '';
        themeButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        const theme = btn.getAttribute('data-theme');
        if (theme && theme !== 'default') {
          document.body.classList.add('theme-' + theme);
        }
        // Progress bar color
        if (theme === 'retro') {
          document.documentElement.style.setProperty('--progress-bar', '#ff00cc');
        } else if (theme === 'modern') {
          document.documentElement.style.setProperty('--progress-bar', '#00ffe7');
        } else if (theme === 'future') {
          document.documentElement.style.setProperty('--progress-bar', '#00ffe7');
        } else {
          document.documentElement.style.setProperty('--progress-bar', '#00ffe7');
        }
      }
    });

    // --- Progress Bar ---
    const progressBar = document.getElementById('progress-bar');
    function updateProgressBar() {
      const scrollTop = window.scrollY || document.documentElement.scrollTop;
      const docHeight = document.documentElement.scrollHeight - window.innerHeight;
      const percent = Math.min(100, (scrollTop / docHeight) * 100);
      progressBar.style.width = percent + '%';
      // Morph color
      progressBar.style.background = `linear-gradient(90deg, var(--progress-bar), #ff00cc ${percent}%)`;
    }
    window.addEventListener('scroll', updateProgressBar);
    window.addEventListener('resize', updateProgressBar);
    updateProgressBar();

    // --- Animated Landing Intro ---
    window.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        document.querySelector('#landing .intro').classList.add('animated');
      }, 400);
    });

    // --- Parallax Background (Landing) ---
    window.addEventListener('scroll', () => {
      const parallax = document.querySelector('#landing .parallax-bg');
      if (parallax) {
        const y = window.scrollY * 0.18;
        parallax.style.transform = `translateY(${y}px) scale(1.05)`;
      }
    });

    // --- Custom Cursor System ---
    const cursor = document.querySelector('.custom-cursor');
    let cursorType = 'classic';
    let cursorTrailEnabled = false;
    let cursorImage = null;
    let cursorTrail = [];
    let cursorTrailTimeout = null;

    // Cursor Trail
    function spawnTrail(x, y) {
      const trail = document.createElement('div');
      trail.className = 'cursor-trail';
      trail.style.left = (x - 4) + 'px';
      trail.style.top = (y - 4) + 'px';
      document.body.appendChild(trail);
      setTimeout(() => {
        trail.style.opacity = 0;
        setTimeout(() => trail.remove(), 400);
      }, 60);
    }

    // Cursor Move
    document.addEventListener('mousemove', e => {
      cursor.style.left = e.clientX + 'px';
      cursor.style.top = e.clientY + 'px';
      if (cursorTrailEnabled) spawnTrail(e.clientX, e.clientY);
    });

    // Cursor Style Switcher
    const cursorStyleSelect = document.getElementById('cursor-style');
    cursorStyleSelect.addEventListener('change', e => {
      setCursorType(e.target.value);
    });
    function setCursorType(type) {
      cursorType = type;
      cursor.className = 'custom-cursor';
      cursorTrailEnabled = false;
      if (type === 'classic') {
        // default
      } else if (type === 'magnetic') {
        cursor.classList.add('magnetic');
      } else if (type === 'pixel') {
        cursor.classList.add('pixel');
      } else if (type === 'enlarged') {
        cursor.classList.add('enlarged');
      } else if (type === 'trail') {
        cursorTrailEnabled = true;
      } else if (type === 'image') {
        cursor.classList.add('preview');
        if (!cursorImage) {
          cursorImage = document.createElement('img');
          cursorImage.src = 'https://i.imgur.com/1Q9Z1Zm.png';
          cursorImage.style.width = '100%';
          cursorImage.style.height = '100%';
          cursorImage.style.objectFit = 'cover';
        }
        cursor.innerHTML = '';
        cursor.appendChild(cursorImage);
      } else {
        cursor.innerHTML = '';
      }
      if (type !== 'image') {
        cursor.innerHTML = '';
      }
    }
    setCursorType('classic');

    // Magnetic Cursor Effect (for nav/CTAs)
    function magneticize(el) {
      el.addEventListener('mouseenter', () => {
        if (cursorType === 'magnetic' || el.hasAttribute('data-magnetic')) {
          cursor.classList.add('magnetic');
        }
      });
      el.addEventListener('mouseleave', () => {
        cursor.classList.remove('magnetic');
      });
      el.addEventListener('mousemove', e => {
        if (cursorType === 'magnetic' || el.hasAttribute('data-magnetic')) {
          const rect = el.getBoundingClientRect();
          const x = e.clientX - rect.left - rect.width/2;
          const y = e.clientY - rect.top - rect.height/2;
          cursor.style.transform = `translate(-50%, -50%) scale(1.5) translate(${x*0.18}px,${y*0.18}px)`;
        }
      });
      el.addEventListener('mouseleave', () => {
        cursor.style.transform = `translate(-50%, -50%) scale(1)`;
      });
    }
    document.querySelectorAll('[data-magnetic], .cta, #theme-switcher button').forEach(magneticize);

    // Hide cursor on input/textarea
    document.querySelectorAll('input, textarea').forEach(el => {
      el.addEventListener('mouseenter', () => cursor.style.opacity = 0);
      el.addEventListener('mouseleave', () => cursor.style.opacity = 1);
    });

    // --- Retro Section: Pixel Cursor & Choppy Scroll ---
    function enableRetroCursor() {
      setCursorType('pixel');
      document.body.style.cursor = 'url("https://i.imgur.com/1Q9Z1Zm.png"), auto';
    }
    function disableRetroCursor() {
      document.body.style.cursor = 'auto';
    }
    // Choppy scroll effect
    let retroScrollActive = false;
    function enableRetroScroll() {
      retroScrollActive = true;
      window.addEventListener('wheel', retroScrollHandler, {passive:false});
    }
    function disableRetroScroll() {
      retroScrollActive = false;
      window.removeEventListener('wheel', retroScrollHandler, {passive:false});
    }
    function retroScrollHandler(e) {
      if (!retroScrollActive) return;
      e.preventDefault();
      const step = window.innerHeight * 0.7;
      if (e.deltaY > 0) {
        window.scrollTo({top: Math.min(document.body.scrollHeight, window.scrollY + step), behavior: 'auto'});
      } else {
        window.scrollTo({top: Math.max(0, window.scrollY - step), behavior: 'auto'});
      }
    }

    // --- Modern Section: Horizontal Scroll ---
    const modernSection = document.getElementById('modern');
    const horizontalScroll = modernSection.querySelector('.horizontal-scroll');
    let modernScrollActive = false;
    function enableModernScroll() {
      modernScrollActive = true;
      window.addEventListener('scroll', modernScrollHandler);
    }
    function disableModernScroll() {
      modernScrollActive = false;
      window.removeEventListener('scroll', modernScrollHandler);
      horizontalScroll.style.transform = '';
    }
    function modernScrollHandler() {
      if (!modernScrollActive) return;
      const sectionTop = modernSection.offsetTop;
      const sectionHeight = modernSection.offsetHeight;
      const scrollY = window.scrollY;
      if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) {
        const progress = (scrollY - sectionTop) / (sectionHeight - window.innerHeight);
        horizontalScroll.style.transform = `translateX(-${progress * 300}vw)`;
        // Activate project
        const idx = Math.round(progress * 3);
        modernSection.querySelectorAll('.project').forEach((p, i) => {
          p.classList.toggle('active', i === idx);
        });
      }
    }
    // Project preview in cursor
    modernSection.querySelectorAll('.project').forEach(proj => {
      proj.addEventListener('mouseenter', e => {
        if (cursorType === 'enlarged' || cursorType === 'preview') {
          cursor.className = 'custom-cursor preview';
          cursor.innerHTML = `<img src="${proj.getAttribute('data-preview')}" style="width:100%;height:100%;object-fit:cover;">`;
        }
      });
      proj.addEventListener('mouseleave', e => {
        setCursorType(cursorType);
      });
    });

    // --- Future Section: Scroll-Jack, GSAP, Three.js, Morphing Cursor ---
    let futureScrollActive = false;
    function enableFutureScroll() {
      futureScrollActive = true;
      gsap.registerPlugin(ScrollTrigger);
      // Animate future content in layers
      gsap.from("#future .future-content", {
        y: 120,
        opacity: 0,
        duration: 1.2,
        scrollTrigger: {
          trigger: "#future",
          start: "top 80%",
          end: "top 30%",
          scrub: 1
        }
      });
      // Animate AI mockup
      gsap.from("#future .ai-mockup", {
        scale: 0.7,
        opacity: 0,
        duration: 1.2,
        scrollTrigger: {
          trigger: "#future .ai-mockup",
          start: "top 90%",
          end: "top 60%",
          scrub: 1
        }
      });
      // 3D Three.js BG
      initThreeBG();
    }
    function disableFutureScroll() {
      futureScrollActive = false;
      // No-op for now
    }
    // Morphing cursor for play/tap
    document.querySelectorAll('#future .ai-mockup').forEach(el => {
      el.addEventListener('mouseenter', () => {
        cursor.className = 'custom-cursor morph-tap';
        cursor.innerHTML = 'Tap to interact';
      });
      el.addEventListener('mouseleave', () => {
        setCursorType(cursorType);
      });
    });
    // Play icon over video/canvas (simulate)
    document.querySelectorAll('#three-bg').forEach(el => {
      el.addEventListener('mouseenter', () => {
        cursor.className = 'custom-cursor morph-play';
        cursor.innerHTML = '';
      });
      el.addEventListener('mouseleave', () => {
        setCursorType(cursorType);
      });
    });

    // --- Playground Section: Dynamic Scroll & Cursor Switcher ---
    const scrollSwitcherBtns = document.querySelectorAll('#playground .scroll-style-switcher button');
    let scrollMode = 'classic';
    scrollSwitcherBtns.forEach(btn => {
      btn.onclick = () => {
        scrollSwitcherBtns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        setScrollMode(btn.getAttribute('data-scroll'));
      }
    });
    function setScrollMode(mode) {
      scrollMode = mode;
      // Reset all
      disableRetroScroll();
      disableModernScroll();
      disableFutureScroll();
      if (mode === 'classic') {
        // Default browser scroll
      } else if (mode === 'parallax') {
        // Parallax is always on for landing
      } else if (mode === 'inertia') {
        enableLenis();
      } else if (mode === 'scrolljack') {
        enableFutureScroll();
      }
    }

    // --- Lenis Smooth Scroll (Inertia) ---
    let lenis = null;
    function enableLenis() {
      if (!lenis) {
        lenis = new Lenis({
          duration: 1.2,
          smooth: true,
          direction: 'vertical',
          gestureDirection: 'vertical',
          smoothTouch: false,
          touchMultiplier: 2,
        });
        function raf(time) {
          lenis.raf(time);
          requestAnimationFrame(raf);
        }
        requestAnimationFrame(raf);
      }
    }

    // --- Section-based Scroll/Cursor Activation ---
    function onScroll() {
      const y = window.scrollY;
      const h = window.innerHeight;
      const landing = document.getElementById('landing');
      const retro = document.getElementById('retro');
      const modern = document.getElementById('modern');
      const future = document.getElementById('future');
      const playground = document.getElementById('playground');
      if (y >= landing.offsetTop && y < retro.offsetTop) {
        setCursorType('classic');
        setScrollMode('classic');
      } else if (y >= retro.offsetTop && y < modern.offsetTop) {
        setCursorType('pixel');
        enableRetroScroll();
      } else if (y >= modern.offsetTop && y < future.offsetTop) {
        setCursorType('enlarged');
        enableModernScroll();
      } else if (y >= future.offsetTop && y < playground.offsetTop) {
        setCursorType('classic');
        enableFutureScroll();
      } else if (y >= playground.offsetTop) {
        // Playground: user can switch
      }
    }
    window.addEventListener('scroll', onScroll);

    // --- Three.js BG for Future Section ---
    function initThreeBG() {
      if (window._threeBG) return;
      window._threeBG = true;
      const container = document.getElementById('three-bg');
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
      const renderer = new THREE.WebGLRenderer({alpha:true});
      renderer.setSize(window.innerWidth, window.innerHeight);
      container.appendChild(renderer.domElement);
      // 3D rotating torus
      const geometry = new THREE.TorusKnotGeometry( 10, 3, 100, 16 );
      const material = new THREE.MeshStandardMaterial( { color: 0x00ffe7, metalness: 0.7, roughness: 0.2 } );
      const torusKnot = new THREE.Mesh( geometry, material );
      scene.add( torusKnot );
      // Lights
      const light = new THREE.PointLight(0xffffff, 1, 100);
      light.position.set(20, 20, 20);
      scene.add(light);
      camera.position.z = 40;
      function animate() {
        requestAnimationFrame( animate );
        torusKnot.rotation.x += 0.008;
        torusKnot.rotation.y += 0.012;
        renderer.render( scene, camera );
      }
      animate();
      window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth/window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      });
    }

    // --- Playground: Cursor Trail, Image, etc. ---
    cursorStyleSelect.addEventListener('change', e => {
      if (e.target.value === 'trail') {
        cursorTrailEnabled = true;
      } else {
        cursorTrailEnabled = false;
      }
    });

    // --- Initial Setup ---
    setCursorType('classic');
    setScrollMode('classic');
    updateProgressBar();

    // --- CTA Scroll Down ---
    document.querySelector('#landing .cta').onclick = () => {
      window.scrollTo({top: document.getElementById('retro').offsetTop, behavior: 'smooth'});
    };

    // --- Accessibility: Hide system cursor ---
    document.body.style.cursor = 'none';

    // --- Fallback for <blink> tag in retro section ---
    (function() {
      const blinks = document.getElementsByTagName('blink');
      if (blinks.length) {
        setInterval(() => {
          for (let i = 0; i < blinks.length; i++) {
            blinks[i].style.visibility = (blinks[i].style.visibility === 'hidden') ? '' : 'hidden';
          }
        }, 700);
      }
    })();
  </script>
</body>
</html>
